// src/components/cart/CouponInput.scss
@use '../../scss/variables' as *;
@use '../../scss/mixins' as *;

.coupon-input-container {
    background: rgba($surface0, 0.5);
    border: 2px solid $surface1;
    border-radius: 8px;
    padding: 1.5rem;
    margin: 1.5rem 0;
    position: relative;
    
    &::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, $pink, $mauve);
        border-radius: 8px;
        opacity: 0;
        z-index: -1;
        transition: opacity 0.3s ease;
    }
    
    &:hover::before {
        opacity: 0.1;
    }
    
    .coupon-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        
        .coupon-icon {
            color: $mauve;
            font-size: 1.2rem;
        }
        
        ion-label {
            color: $text;
            font-family: $font-mono;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    }
    
    .coupon-form {
        display: flex;
        gap: 0.75rem;
        align-items: stretch;
        
        .coupon-field {
            flex: 1;
            --background: #{$surface1};
            --border-radius: 4px;
            --padding-start: 1rem;
            --padding-end: 1rem;
            --min-height: 45px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            
            &.error {
                --border-color: #{$red};
                animation: shake 0.3s ease;
            }
            
            &.success {
                --border-color: #{$green};
            }
            
            .coupon-input {
                --color: #{$text};
                font-family: $font-mono;
                text-transform: uppercase;
                letter-spacing: 1px;
                
                &::placeholder {
                    color: $overlay0;
                    text-transform: none;
                }
            }
        }
        
        .apply-button {
            --background: #{$mauve};
            --color: #{$base};
            --border-radius: 4px;
            --padding-start: 2rem;
            --padding-end: 2rem;
            font-family: $font-mono;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            min-width: 100px;
            
            &:hover {
                --background: #{$pink};
            }
            
            &:disabled {
                --background: #{$overlay0};
                --color: #{$overlay2};
            }
        }
    }
    
    .validation-message {
        margin: 0.75rem 0 0;
        font-size: 0.9rem;
        font-family: $font-primary;
        
        &.error {
            color: $red;
        }
        
        &.success {
            color: $green;
        }
    }
    
    .coupon-suggestions {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid $surface1;
        
        .suggestions-label {
            color: $overlay1;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            font-family: $font-primary;
        }
        
        .suggestions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            
            .suggestion-chip {
                --background: #{$surface1};
                --color: #{$mauve};
                font-family: $font-mono;
                font-size: 0.85rem;
                cursor: pointer;
                transition: all 0.2s ease;
                border: 1px solid transparent;
                
                &:hover {
                    --background: #{$mauve};
                    --color: #{$base};
                    transform: translateY(-2px);
                    box-shadow: 0 4px 8px rgba($mauve, 0.2);
                }
            }
        }
    }
    
    // Applied state
    &.applied {
        background: rgba($green, 0.05);
        border-color: $green;
        
        .applied-coupon {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            
            .success-icon {
                color: $green;
                font-size: 1.5rem;
            }
            
            .coupon-code {
                flex: 1;
                font-family: $font-mono;
                font-size: 1.1rem;
                color: $text;
                text-transform: uppercase;
                letter-spacing: 1px;
                font-weight: 600;
            }
            
            .remove-button {
                --padding-start: 0.5rem;
                --padding-end: 0.5rem;
                --color: #{$overlay1};
                
                &:hover {
                    --color: #{$red};
                }
                
                ion-icon {
                    font-size: 1.2rem;
                }
            }
        }
        
        .success-message {
            margin: 0.5rem 0 0;
            color: $green;
            font-size: 0.9rem;
            font-family: $font-primary;
        }
    }
}

// Shake animation for errors
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

// Responsive adjustments
@include mobile-only {
    .coupon-input-container {
        padding: 1rem;
        
        .coupon-form {
            flex-direction: column;
            
            .apply-button {
                width: 100%;
            }
        }
        
        .suggestions-list {
            .suggestion-chip {
                font-size: 0.8rem;
            }
        }
    }
}