// src/animations/AnimationUtils.scss
/* Catppuccin Mocha Color Palette */
$rosewater: #f5e0dc;
$flamingo: #f2cdcd;
$pink: #f5c2e7;
$mauve: #cba6f7;
$red: #f38ba8;
$maroon: #eba0ac;
$peach: #fab387;
$yellow: #f9e2af;
$green: #a6e3a1;
$teal: #94e2d5;
$sky: #89dceb;
$sapphire: #74c7ec;
$blue: #89b4fa;
$lavender: #b4befe;
$text: #cdd6f4;
$subtext1: #bac2de;
$subtext0: #a6adc8;
$overlay2: #9399b2;
$overlay1: #7f849c;
$overlay0: #6c7086;
$surface2: #585b70;
$surface1: #45475a;
$surface0: #313244;
$base: #1e1e2e;
$mantle: #181825;
$crust: #11111b;

/* Base for all animated elements */
.animated-element {
  opacity: 0;
  will-change: transform, opacity;

  &.visible {
    opacity: 1;
  }
}

/* Individual animation types */
.animation-fade-in {
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    opacity: 1;
  }
}

.animation-slide-up {
  transform: translateY(30px);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: translateY(0);
    opacity: 1;
  }
}

.animation-slide-down {
  transform: translateY(-30px);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: translateY(0);
    opacity: 1;
  }
}

.animation-slide-left {
  transform: translateX(30px);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: translateX(0);
    opacity: 1;
  }
}

.animation-slide-right {
  transform: translateX(-30px);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: translateX(0);
    opacity: 1;
  }
}

.animation-zoom-in {
  transform: scale(0.9);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: scale(1);
    opacity: 1;
  }
}

.animation-zoom-out {
  transform: scale(1.1);
  transition: opacity var(--animation-duration, 500ms) ease var(--animation-delay, 0ms),
  transform var(--animation-duration, 500ms) ease var(--animation-delay, 0ms);

  &.visible {
    transform: scale(1);
    opacity: 1;
  }
}

.animation-pixelate {
  filter: blur(10px) brightness(0);
  transform: scale(1.05);
  transition: opacity var(--animation-duration, 800ms) cubic-bezier(0.16, 1, 0.3, 1) var(--animation-delay, 0ms),
  filter var(--animation-duration, 800ms) cubic-bezier(0.16, 1, 0.3, 1) var(--animation-delay, 0ms),
  transform var(--animation-duration, 800ms) cubic-bezier(0.16, 1, 0.3, 1) var(--animation-delay, 0ms);

  &.visible {
    filter: blur(0) brightness(1);
    transform: scale(1);
    opacity: 1;
  }
}

.animation-glitch {
  position: relative;
  opacity: 1;

  &::before,
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    background: inherit;
    pointer-events: none;
  }

  &::before {
    z-index: -1;
    animation: none;
  }

  &::after {
    z-index: -2;
    animation: none;
  }

  &.visible {
    animation: glitchEffect 0.5s forwards var(--animation-delay, 0ms);

    &::before {
      animation: glitchEffectShift1 var(--animation-duration, 500ms) infinite alternate-reverse;
      opacity: 0.5;
    }

    &::after {
      animation: glitchEffectShift2 var(--animation-duration, 500ms) infinite alternate-reverse;
      opacity: 0.5;
    }
  }
}

.animation-crt-in {
  position: relative;
  opacity: 0;
  filter: brightness(0);
  transform: scale(1.02);
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: $mauve;
    box-shadow: 0 0 10px 2px $mauve;
    transform: scaleY(0);
    z-index: 1;
  }

  &.visible {
    animation: crtOn var(--animation-duration, 700ms) cubic-bezier(0.2, 0.9, 0.3, 1) forwards var(--animation-delay, 0ms);

    &::before {
      animation: crtScanline 0.6s linear forwards;
    }
  }
}

/* Staggered container */
.staggered-container {
  /* No specific styles needed by default */
}

/* Glitch Text Effect */
.glitch-text {
  position: relative;
  color: var(--text-color, $text);
  font-weight: bold;
  display: inline-block;

  .glitch-text-item {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    &:nth-child(1) {
      position: relative;
      z-index: 3;
    }

    &:nth-child(2) {
      color: var(--glitch-color-1, $pink);
      z-index: 1;
      animation: glitchText1 6s infinite alternate;
    }

    &:nth-child(3) {
      color: var(--glitch-color-2, $blue);
      z-index: 2;
      animation: glitchText2 4s infinite alternate;
    }
  }
}

/* CRT Screen */
.crt-screen {
  position: relative;
  background-color: $crust;
  padding: 20px;
  overflow: hidden;

  &.rounded {
    border-radius: 10px;
    overflow: hidden;

    &::before {
      border-radius: 10px;
    }
  }

  &.with-glow {
    box-shadow: 0 0 15px rgba($mauve, 0.5);

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba($mauve, 0.1), transparent, rgba($pink, 0.1));
      pointer-events: none;
      z-index: 1;
    }
  }

  .crt-content {
    position: relative;
    z-index: 2;
  }

  .crt-scanlines {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
                    to bottom,
                    transparent 0%,
                    rgba($mauve, 0.05) 0.5%,
                    transparent 1%
    );
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 3;
  }

  .crt-flicker {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    background-color: rgba($mauve, 0.03);
    pointer-events: none;
    z-index: 3;
    animation: crtFlicker 6s infinite;
  }
}

/* Animation Keyframes */
@keyframes glitchEffect {
  0% {
    opacity: 0;
    clip-path: inset(50% 0 50% 0);
    transform: skew(10deg);
  }
  10% {
    clip-path: inset(30% 0 60% 0);
    transform: skew(-10deg);
  }
  20% {
    clip-path: inset(20% 0 20% 0);
    transform: skew(8deg);
  }
  30% {
    clip-path: inset(10% 0 40% 0);
    transform: skew(-4deg);
  }
  40%, 100% {
    clip-path: inset(0 0 0 0);
    transform: skew(0deg);
    opacity: 1;
  }
}

@keyframes glitchEffectShift1 {
  0%, 100% {
    transform: translate(0);
    opacity: 0.2;
  }
  20%, 80% {
    transform: translate(-5px, 2px);
    opacity: 0.3;
  }
  50% {
    transform: translate(5px, -2px);
    opacity: 0.5;
  }
}

@keyframes glitchEffectShift2 {
  0%, 100% {
    transform: translate(0);
    opacity: 0.2;
  }
  20%, 80% {
    transform: translate(5px, 2px);
    opacity: 0.3;
  }
  50% {
    transform: translate(-5px, -2px);
    opacity: 0.5;
  }
}

@keyframes crtOn {
  0% {
    opacity: 0;
    filter: brightness(0) blur(2px);
    transform: scale(1.02);
  }
  10% {
    opacity: 0.2;
    filter: brightness(0.5) blur(1px);
    transform: scale(1.01);
  }
  30% {
    opacity: 0.5;
    filter: brightness(0.8) blur(0.5px);
    transform: scale(1.005);
  }
  60% {
    opacity: 0.8;
    filter: brightness(1.2) blur(0px);
    transform: scale(1.001);
  }
  80% {
    filter: brightness(1);
  }
  100% {
    opacity: 1;
    filter: brightness(1) blur(0);
    transform: scale(1);
  }
}

@keyframes crtScanline {
  0% {
    transform: scaleY(0) translateY(0);
    opacity: 1;
  }
  10% {
    transform: scaleY(20) translateY(0%);
  }
  80% {
    transform: scaleY(8) translateY(100%);
    opacity: 0.8;
  }
  100% {
    transform: scaleY(0) translateY(100%);
    opacity: 0;
  }
}

@keyframes glitchText1 {
  0%, 5%, 95%, 100% {
    transform: translate(0);
    opacity: 0.2;
  }
  20%, 80% {
    transform: translate(-3px, 1px);
    opacity: 0.4;
  }
  40%, 60% {
    transform: translate(-2px, -1px);
    opacity: 0.5;
  }
  2%, 8%, 22%, 28%, 42%, 48%, 62%, 68%, 82%, 88% {
    transform: translate(-4px, 2px);
    opacity: 0.2;
  }
}

@keyframes glitchText2 {
  0%, 5%, 95%, 100% {
    transform: translate(0);
    opacity: 0.2;
  }
  20%, 80% {
    transform: translate(3px, 1px);
    opacity: 0.4;
  }
  40%, 60% {
    transform: translate(2px, -1px);
    opacity: 0.5;
  }
  2%, 8%, 22%, 28%, 42%, 48%, 62%, 68%, 82%, 88% {
    transform: translate(4px, -2px);
    opacity: 0.2;
  }
}

@keyframes crtFlicker {
  0%, 100% {
    opacity: 0;
  }
  92% {
    opacity: 0;
  }
  92.5% {
    opacity: 0.5;
  }
  93% {
    opacity: 0.1;
  }
  93.5% {
    opacity: 0.4;
  }
  94% {
    opacity: 0;
  }
  97% {
    opacity: 0;
  }
  97.5% {
    opacity: 0.6;
  }
  98% {
    opacity: 0;
  }
  98.5% {
    opacity: 0.2;
  }
  99% {
    opacity: 0;
  }
}